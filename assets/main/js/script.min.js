import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function loading(){let t=document.getElementById("logo"),o=document.querySelector(".loading");var e=window.innerHeight-173;gsap.set(t,{y:e,scale:145/28}),gsap.set(o,{"--after-height":"0px"}),gsap.to(t,{y:0,duration:2.5,onUpdate:function(){var e=t.getBoundingClientRect().top,e=window.innerHeight-e+12;gsap.set(o,{"--after-height":e+"px"})},onComplete:()=>{gsap.to(t,{scale:1,duration:1,onComplete:()=>{document.querySelector(".loading").classList.add("loaded")}})}})}function sectionFields(){$(".section-fields").length<1||gsap.utils.toArray(".fields-item").forEach(o=>{var e=o.querySelector(".fields-item-img"),t=o.querySelector(".fields-item-name h1"),t=SplitText.create(t,{type:"chars",mask:"chars"});gsap.set(t.chars,{y:"125%"}),t.chars.forEach((e,t)=>{ScrollTrigger.create({trigger:o,start:`top+=${25*t-250} top`,end:`top+=${25*t-100} top`,scrub:1,animation:gsap.fromTo(e,{y:"125%"},{y:"0%",ease:"none"})})}),ScrollTrigger.create({trigger:o,start:"top bottom",end:"top top",scrub:.5,animation:gsap.fromTo(e,{clipPath:"polygon(9.7% 6.7%, 90.3% 6.7%, 90.3% 93.3%, 9.7% 93.3%)"},{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",ease:"none"})}),ScrollTrigger.create({trigger:o,start:"bottom bottom",end:"bottom top",scrub:.5,animation:gsap.fromTo(e,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"},{clipPath:"polygon(9.7% 6.7%, 90.3% 6.7%, 90.3% 93.3%, 9.7% 93.3%)",ease:"none"})})})}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),sectionFields(),loading()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0)}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});